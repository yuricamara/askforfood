{"version":3,"sources":["../../src/pages/company/company.module.ts","../../src/pages/company/company.ts","../../node_modules/rxjs/add/observable/forkJoin.js"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { ComponentsModule } from '../../components/components.module';\r\nimport { CompanyPage } from './company';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CompanyPage,\r\n  ],\r\n  imports: [\r\n    ComponentsModule,\r\n    IonicPageModule.forChild(CompanyPage),\r\n  ],\r\n})\r\nexport class CompanyPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/company/company.module.ts","import { Component } from '@angular/core';\nimport { AlertController, IonicPage, LoadingController, NavController, NavParams } from 'ionic-angular';\nimport { CompanyService, ProductService } from '../../services';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { ICompany, IProductExisting } from '../../interfaces';\n\nimport { first } from 'rxjs/operators';\nimport 'rxjs/add/observable/forkJoin';\n\n@IonicPage({\n  segment: 'company/:companyKey'\n})\n@Component({\n  selector: 'page-company',\n  templateUrl: 'company.html'\n})\nexport class CompanyPage {\n  company:ICompany;\n  companyKey:string;\n\n  loading: any;\n  showPage:boolean;\n\n  uid: string;\n  segment: string = 'menu';\n\n  products:IProductExisting[];\n\n  constructor(\n    public alertCtrl: AlertController,\n    public angularFireAuth: AngularFireAuth,\n    public companyService:CompanyService,\n    public productService: ProductService,\n    public loadingCtrl: LoadingController,\n    public navCtrl: NavController,\n    public navParams: NavParams\n  ) {\n    this.companyKey = this.navParams.get('companyKey');\n  }\n\n  ionViewDidLoad(){\n    this.angularFireAuth\n      .authState\n      .pipe(first())\n      .subscribe(user => {\n        if(!user){ return; }\n\n        this.uid = user.uid;\n      }, error => console.error(error));\n  }\n\n  ionViewWillEnter(){\n    this.init();\n  }\n\n  private init(){\n    this.loading = this.loadingCtrl.create({\n      content: 'Aguarde...',\n      dismissOnPageChange: true\n    });\n\n    this.loading.present();\n\n    this.getCompany();\n    this.getProducts();\n  }\n\n  onSegmentChange({ value }){\n    this.segment = value;\n  }\n\n  // Empresa\n  // ***********************************\n  private getCompany(){\n    this.companyService\n      .getOne(this.companyKey)\n      .pipe(first())\n      .subscribe((company:ICompany) => {\n        if(!company){ return; }\n\n        this.company = company;\n      }, error => {\n        console.error(error);\n      });\n  }\n\n  editCompany(){\n    this.navCtrl.push('CompanyEditPage', {\n      companyKey: this.company.key\n    });\n  }\n\n  removeCompany(){\n    const confirm = this.alertCtrl.create({\n      subTitle: 'Remover empresa?',\n      buttons: [\n        {\n          text: 'NÃ£o'\n        },\n        {\n          text: 'Remover',\n          handler: () => {\n            this.companyService\n              .removeOne(this.companyKey)\n              .then( () => {\n                this.navCtrl.pop();\n              });\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n\n  toggleFavoriteCompany(){\n    console.log('toggleFavoriteCompany()');\n  }\n\n  // Produtos\n  // ***********************************\n  addProduct(){\n    this.navCtrl.push('ProductRegisterPage', {\n      companyKey: this.company.key\n    });\n  }\n\n  private getProducts(){\n    this.productService\n      .getAllOfACompany(this.companyKey)\n      .pipe(first())\n      .subscribe((products: IProductExisting[]) => {\n        this.products = products.filter(product => !product.hide);\n        this.showPage = true;\n        this.loading.dismiss();\n      }, error => {\n        console.error(error);\n        this.loading.dismiss();\n      });\n  }\n\n  private goToProductPage(productKey){\n    this.navCtrl.push('ProductPage', {\n      company:this.company,\n      productKey\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/company/company.ts","\"use strict\";\nvar Observable_1 = require('../../Observable');\nvar forkJoin_1 = require('../../observable/forkJoin');\nObservable_1.Observable.forkJoin = forkJoin_1.forkJoin;\n//# sourceMappingURL=forkJoin.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rxjs/add/observable/forkJoin.js\n// module id = 589\n// module chunks = 2"],"sourceRoot":""}