{"version":3,"sources":["../../src/pages/product-edit/product-edit.module.ts","../../src/pages/product-edit/product-edit.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { ComponentsModule } from '../../components/components.module';\r\nimport { ProductEditPage } from './product-edit';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ProductEditPage,\r\n  ],\r\n  imports: [\r\n    ComponentsModule,\r\n    IonicPageModule.forChild(ProductEditPage),\r\n  ],\r\n})\r\nexport class ProductEditPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/product-edit/product-edit.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, LoadingController, NavController, NavParams } from 'ionic-angular';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\nimport { IProductExisting } from '../../interfaces';\nimport { ProductService } from '../../services';\nimport { first } from 'rxjs/operators';\n\n@IonicPage({\n  segment: 'product/:productKey/edit'\n})\n@Component({\n  selector: 'page-product-edit',\n  templateUrl: 'product-edit.html',\n})\nexport class ProductEditPage {\n  form: FormGroup;\n  loading: any;\n\n  showForm: boolean;\n\n  productKey: string;\n  product: IProductExisting;\n\n  constructor(\n    private fb: FormBuilder,\n    public loadingCtrl: LoadingController,\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private productService: ProductService\n  ) {\n    this.productKey = this.navParams.get('productKey');\n  }\n\n  ionViewDidLoad() {\n    this.getProduct();\n  }\n\n  private getProduct(){\n    this.productService\n      .getOne(this.productKey)\n      .pipe(first())\n      .subscribe( product => {\n        this.product = product;\n\n        this.createForm();\n\n        this.showForm = true;\n      }, error => {\n        console.error(error);\n      });\n  }\n\n  private createForm() {\n    const { name, description, price, category, sale } = this.product;\n\n    this.form = this.fb.group({\n      name: [name, [\n        Validators.required\n      ]],\n      description: [description],\n      price: [price, [\n        Validators.required\n      ]],\n      category: [category, [\n        Validators.required\n      ]],\n      sale: [sale]\n    });\n  }\n\n\n  submitForm() {\n    if(this.form.invalid){ return; }\n\n    const { name, description, price, category, sale } = this.form.value;\n\n    this.loading = this.loadingCtrl.create({\n      content: 'Aguarde...',\n      dismissOnPageChange: true\n    });\n\n    this.loading.present();\n\n    this.productService\n      .updateOne({\n        productKey: this.product.key,\n        name, description, price, category, sale\n      })\n      .then(() => {\n        this.navCtrl.getPrevious().data.productKey = this.product.key;\n        this.navCtrl.pop();\n      }, error => {\n        console.error(error);\n        this.loading.dismiss();\n      });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/product-edit/product-edit.ts"],"sourceRoot":""}